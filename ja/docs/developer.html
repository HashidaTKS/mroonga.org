<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6. 開発者向け情報 &mdash; mroonga v2.04 documentation</title>
    
    <link rel="stylesheet" href="static/mroonga.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.04',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="static/translations.js"></script>
    <link rel="shortcut icon" href="static/favicon.ico"/>
    <link rel="top" title="mroonga v2.04 documentation" href="index.html" />
    <link rel="next" title="6.1. デバッグ方法" href="developer/debug.html" />
    <link rel="prev" title="5. コミュニティ" href="community.html" /> 
      <meta property="fb:page_id" content="238184682903165" /><!-- mroonga -->
    <meta property="fb:admins" content="664204556" /><!-- kouhei.sutou -->
    <meta property="og:type" content="product" />
    <meta property="og:image" content="http://mroonga.github.com/images/logos/mroonga-icon-full-size.png" />
    <meta property="og:site_name" content="mroonga" />

    <link rel="stylesheet" href="/css/sphinx.css" type="text/css" />
  </head>

    <body>
    <div id="fb-root"></div>

<div class="header">
  <h1 class="title">
    <a id="top-link" href="./../">
      <span class="project">mroonga</span>
      <span class="separator">-</span>
      <span class="description">MySQLで高速に全文検索するためのオープンソースのストレージエンジン</span>
    </a>
  </h1>

      <div class="facebook-buttons">
      <fb:like href="http://www.facebook.com/pages/mroonga/238184682903165"
               layout="standard"
               width="290"></fb:like>
    </div>
    <div class="other-language-links">

    <ul>
      <li><a href="../../docs/developer.html"><img src="static/us.png" alt="English">English version</a></li>
    </ul>
  </div>
</div>
  

    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="developer/debug.html" title="6.1. デバッグ方法"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="community.html" title="5. コミュニティ"
             accesskey="P">前へ</a> |</li>
        <li><a href="index.html">mroonga v2.04 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="developer-s-guide">
<h1>6. 開発者向け情報<a class="headerlink" href="#developer-s-guide" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer/debug.html">6.1. デバッグ方法</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer/debug.html#building-for-debugging">6.1.1. デバッグ用ビルド方法</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/debug.html#more-about-run-sql-test-sh">6.1.2. run-sql-test.sh を使いこなす</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer/release.html">6.2. リリース手順</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id1">6.2.1. 変更点の記述</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id2">6.2.2. 配布用ファイルのアップロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id3">6.2.3. パッケージの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id4">6.2.4. タグを打つ</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id5">6.2.5. ドキュメントのアップロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer/release.html#id6">6.2.6. リリースメールの送信</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="how-we-are-developing">
<h2>6.3. 開発手法について<a class="headerlink" href="#how-we-are-developing" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>mroonga開発プロジェクトではBTSの1つであるRedmineを用いたチケット駆動開発を実施しています。</p>
<p>Redmineは以下のサイトで運用されています。</p>
<p><a class="reference external" href="http://redmine.groonga.org/projects/show/mroonga">http://redmine.groonga.org/projects/show/mroonga</a></p>
<p>開発の作業はチケット単位で行っています。</p>
<p>開発者の方は上記サイトへのアカウント登録をお願いします。</p>
</div>
<div class="section" id="roadmaps">
<h2>6.4. ロードマップについて<a class="headerlink" href="#roadmaps" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ロードマップは以下のページで確認できます。基本的に開発はロードマップに沿って行います。</p>
<p><a class="reference external" href="http://redmine.groonga.org/projects/mroonga/roadmap">http://redmine.groonga.org/projects/mroonga/roadmap</a></p>
<p>ロードマップはオフラインあるいはオンラインでの開発会議で検討を行った上で決定されます。</p>
<p>ロードマップは各バージョンごとに追加する機能の一覧として構成されています。</p>
</div>
<div class="section" id="source-code-management">
<h2>6.5. ソースコード管理について<a class="headerlink" href="#source-code-management" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>githubを使用したgitによるソースコード管理を行っています。</p>
<p><a class="reference external" href="http://github.com/mroonga/mroonga">http://github.com/mroonga/mroonga</a></p>
<p>上記レポジトリに対してread/writeでcloneを作成し、commitおよびpushして下さい。</p>
<p>アカウントを作成していない開発者の方はgithub.comへの登録をお願いします。</p>
</div>
<div class="section" id="process-of-development">
<h2>6.6. 開発の流れについて<a class="headerlink" href="#process-of-development" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>開発は以下の流れで行いたいと考えています。</p>
<ol class="arabic simple">
<li>チケットの新規作成と内容の記述</li>
<li>開発会議での検討(ロードマップへの反映)</li>
<li>チケットの割り当て(担当者作業開始)</li>
<li>機能実装あるいはバグの修正作業、必要に応じてレポジトリへのpush</li>
<li>テストコードの追加と実行、レポジトリへのpush</li>
<li>実装/テスト内容に対するレビュー(必要に応じて4へ戻る)</li>
<li>ドキュメントの追加/変更、 レポジトリへのpush</li>
<li>チケットの完了</li>
</ol>
<p>機能追加や仕様変更などについても積極的にアイデアを募集します。まずはチケットを新規作成して内容を記述して下さい。</p>
<p>テストコードの追加と実行については後述しますのでそちらを参照して下さい。</p>
<p>基本的にチケットを担当されている方が設計、実装、テスト、ドキュメントまで一通りお願いしたいと考えています。</p>
<p>他の開発者にレビューを依頼し(特に機能追加の場合)、無事パスしたら最後にドキュメントを追加/変更してチケット完了となります。</p>
<p>ドキュメントの追加/変更方法についても詳しくは後述します。</p>
</div>
<div class="section" id="release">
<h2>6.7. リリースについて<a class="headerlink" href="#release" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>リリースはロードマップ上のチケットが全て完了となった段階で行います。</p>
<p>リリースにあたっては以下の作業を行っています。</p>
<ul class="simple">
<li>ソースパッケージ作成</li>
<li>バイナリパッケージ作成</li>
<li>ドキュメント(<a class="reference external" href="http://mroonga.github.com">http://mroonga.github.com</a>)のアップデート</li>
<li>リリースの告知</li>
</ul>
<p><a class="reference internal" href="developer/release.html"><em>リリース手順</em></a> へ移動予定。</p>
</div>
<div class="section" id="development-environment">
<h2>6.8. 開発環境<a class="headerlink" href="#development-environment" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>現在、以下のような開発環境を想定しています。</p>
<ul class="simple">
<li>Linux x86_64</li>
<li>glibc 2.5</li>
<li>MySQL 5.5</li>
<li>groonga 1.2.8</li>
<li>Cutter 1.1 (C/C++単体テスト用)</li>
<li>Sphinx 1.1 (ドキュメント用)</li>
</ul>
<p>glibc 2.5はRed Hat Enterprise Linux 5に相当します。</p>
</div>
<div class="section" id="contents-of-the-source-tree">
<h2>6.9. ソースディレクトリ解説<a class="headerlink" href="#contents-of-the-source-tree" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>今のところソースファイルの数はごくわずかです。なるべくシンプルな状態を維持したいと考えています。</p>
<dl class="docutils">
<dt>ha_mroonga.h</dt>
<dd>mroongaのヘッダファイル</dd>
<dt>ha_mroonga.cc</dt>
<dd>mroongaの実装コード</dd>
<dt>mrnsys.h</dt>
<dd>ユーティリティ関数のヘッダファイル</dd>
<dt>mrnsys.c</dt>
<dd>ユーティリティ関数の実装コード</dd>
<dt>test/sql/</dt>
<dd>SQLによるテストコード用ディレクトリ</dd>
<dt>test/sql/t/</dt>
<dd>SQLによるテストコード用ディレクトリSQLテストスクリプト（現在実行可能なSQL文の定義も兼ねる）</dd>
<dt>test/sql/r/</dt>
<dd>SQLテスト想定実行結果（SQL動作仕様定義も兼ねる）</dd>
<dt>test/unit/</dt>
<dd>C/C++関数単体でのテストコード用ディレクトリ</dd>
<dt>doc/en/</dt>
<dd>Sphinx形式の英語ドキュメント一式</dd>
<dt>doc/ja/</dt>
<dd>Sphinx形式の日本語ドキュメント一式</dd>
</dl>
<p>mroongaはまだ開発の立ち上げ段階であるため、SQL実行に関する仕様のドキュメント化は当面行いません。</p>
<p>その代わりとしてSQLテストスクリプトとその想定実行結果を機能一覧/仕様定義として見なしています。</p>
</div>
<div class="section" id="adding-and-running-tests">
<h2>6.10. テストコードの追加と実行について<a class="headerlink" href="#adding-and-running-tests" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>mroongaではプログラムの品質管理のため、2種類の回帰テストを用いています。</p>
<dl class="docutils">
<dt>SQL tests</dt>
<dd>SQL実行により動作確認を行えるような機能追加/バグ修正に関しては必ずSQLテストを追加して下さい。高速化機能などは一見するとSQLによる動作確認ができないように見える場合もありますが、ステータス変数やinformation_schemaプラグインなどを使用することで上手くテストできるものもあります。</dd>
<dt>C/C++ unit tests</dt>
<dd>Cutterを使用した関数レベルでの回帰テストです。ユーティリティ関数などSQL実行結果による動作の差異を確認できないような実装を追加した場合にはこちらにテストを追加して下さい。</dd>
</dl>
<p>ソースコードレポジトリへのpushを行う前に必ず回帰テストを実行し、デグレードが発生していないことを確認して下さい。</p>
<p>上記の回帰テストは&quot;make check&quot;で双方とも呼び出されます。</p>
<p>SQLテストはMySQLの回帰テストである&quot;mysql-test&quot;に対する&quot;sub test suite&quot;として実装しています。テストケースの追加や想定結果ファイルの改変方法などの詳細情報は以下のMySQLのドキュメントを参照して下さい。</p>
<p><a class="reference external" href="http://dev.mysql.com/doc/mysqltest/2.0/en/index.html">http://dev.mysql.com/doc/mysqltest/2.0/en/index.html</a></p>
<p>C/C++単体テストの書き方についてはcutterのドキュメントを参照して下さい。</p>
<p><a class="reference external" href="http://cutter.sourceforge.net/index.html.ja">http://cutter.sourceforge.net/index.html.ja</a></p>
</div>
<div class="section" id="adding-and-updating-documents">
<h2>6.11. ドキュメントの追加と変更について<a class="headerlink" href="#adding-and-updating-documents" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>mroongaではドキュメント作成にSphinxを使用しています。</p>
<p>ドキュメントはReStructuredText形式でソースファイルを書き、HTML形式などにビルドしています。</p>
<p>ドキュメントのソースファイルは&quot;doc/ja/source&quot;ディレクトリにある拡張子が.rstのファイルです。</p>
<p>加筆修正を行ったら&quot;make html&quot;等でビルドして構文エラーが起きないことを確認して下さい。</p>
<p>ドキュメントの実際の公開場所は <a class="reference external" href="http://mroonga.github.com">http://mroonga.github.com</a> で、これはgithubのサイト機能を使用しているため <a class="reference external" href="http://github.com/mroonga/mroonga.github.com">http://github.com/mroonga/mroonga.github.com</a> レポジトリに最新のHTML出力ファイルをpushすることで更新が行われる仕組みとなっていますが、mroonga.github.comレポジトリへのpushは現リリースバージョンとの整合性などを確認した上で別のタイミングでpushします。</p>
<p>従って、各チケットに対するドキュメントのpushはmroongaレポジトリに対するpushのみで構いません。</p>
<p>またsphinxの出力するディレクトリ名がgithubで使用できない問題を回避するため、&quot;doc/ja/source&quot;ディレクトリにてsphinx2github.shスクリプトを用意しています。mroonga.github.comにcommitする場合にはこのスクリプトを実行してsphinxの生成したファイルを修正して置きましょう。</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">6. 開発者向け情報</a><ul>
<li><a class="reference internal" href="#how-we-are-developing">6.3. 開発手法について</a></li>
<li><a class="reference internal" href="#roadmaps">6.4. ロードマップについて</a></li>
<li><a class="reference internal" href="#source-code-management">6.5. ソースコード管理について</a></li>
<li><a class="reference internal" href="#process-of-development">6.6. 開発の流れについて</a></li>
<li><a class="reference internal" href="#release">6.7. リリースについて</a></li>
<li><a class="reference internal" href="#development-environment">6.8. 開発環境</a></li>
<li><a class="reference internal" href="#contents-of-the-source-tree">6.9. ソースディレクトリ解説</a></li>
<li><a class="reference internal" href="#adding-and-running-tests">6.10. テストコードの追加と実行について</a></li>
<li><a class="reference internal" href="#adding-and-updating-documents">6.11. ドキュメントの追加と変更について</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="community.html"
                        title="前の章へ">5. コミュニティ</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="developer/debug.html"
                        title="次の章へ">6.1. デバッグ方法</a></p>
  <h3>このページ</h3>
  <ul class="this-page-menu">
    <li><a href="sources/developer.txt"
           rel="nofollow">ソースコードを表示</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>クイック検索</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="developer/debug.html" title="6.1. デバッグ方法"
             >次へ</a> |</li>
        <li class="right" >
          <a href="community.html" title="5. コミュニティ"
             >前へ</a> |</li>
        <li><a href="index.html">mroonga v2.04 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2012, mroonga project.
    </div>
      <script src="http://connect.facebook.net/ja_JP/all.js"></script>

    <script>
      FB.init({
         appId  : null,
         status : true, // check login status
         cookie : true, // enable cookies to allow the server to access the session
         xfbml  : true  // parse XFBML
      });
    </script>
  </body>

</html>
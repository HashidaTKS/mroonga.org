.. highlightlang:: none

ユーザガイド
============

インストール方法についてはこちらを参照して下さい: :doc:`install`

インストール確認
----------------

MySQLサーバの起動停止方法は通常のMySQLと同じです。

MySQLサーバを起動した上でmysqlコマンドで接続します。パスワードを設定済みの場合は ``-p`` オプションでパスワードを指定して下さい。 ::

 shell> mysql -uroot test

SHOW ENGINESコマンドでgroongaストレージエンジンがインストールされているかどうかを確認します。::

 mysql> SHOW ENGINES;
 +------------+---------+------------------------------------------------------------+--------------+------+------------+
 | Engine     | Support | Comment                                                    | Transactions | XA   | Savepoints |
 +------------+---------+------------------------------------------------------------+--------------+------+------------+
 | groonga    | YES     | Fulltext search, column base                               | NO           | NO   | NO         |
 | MRG_MYISAM | YES     | Collection of identical MyISAM tables                      | NO           | NO   | NO         |
 | CSV        | YES     | CSV storage engine                                         | NO           | NO   | NO         |
 | MyISAM     | DEFAULT | Default engine as of MySQL 3.23 with great performance     | NO           | NO   | NO         |
 | InnoDB     | YES     | Supports transactions, row-level locking, and foreign keys | YES          | YES  | YES        |
 | MEMORY     | YES     | Hash based, stored in memory, useful for temporary tables  | NO           | NO   | NO         |
 +------------+---------+------------------------------------------------------------+--------------+------+------------+
 6 rows in set (0.00 sec)

上記のように"groonga"ストレージエンジンが見えていればインストールは無事完了しています。

インストールされていなければ以下のようにINSTALL PLUGINコマンドを実行して下さい。 ::

 mysql> INSTALL PLUGIN groonga SONAME 'ha_groonga.so';

動作モード
----------

0.7からgroongaストレージエンジンは以下の2つの動作モードのど
ちらかで動作するようになりました。

* ストレージモード（0.6以前と同じ動作）
* ラッパーモード

ストレージモードでは、全文検索機能だけではなくデータストアも
含めてgroongaの機能を利用します。ストレージエンジンのすべての
機能をgroongaストレージエンジンで実現するため、groongaが得意
としている集計操作が高速である、 ``groonga`` コマンドで直接デー
タベースを操作できるという特長があります。

ストレージモードの構成を図で表すと以下のようになります。
MyISAMやInnoDBなど既存のストレージエンジンの代わりに利用しま
す。

.. figure:: _static/images/storage-mode.png
   :alt: ストレージモード


ラッパーモードでは全文検索機能のみgroongaの機能を利用し、デー
タストアはInnoDBなど既存のストレージエンジンを利用します。ラッ
パーモードを利用することにより、ストレージエンジンとして多く
の利用実績のあるInnoDBに全文検索エンジンとして実績のある
groongaを組み合わせて、高速な全文検索機能付きの信頼性のあるデー
タベースとして利用できるという特長があります。

ラッパーモードの構成を図で表すと以下のようになります。全文検
索関連の処理はgroongaストレージエンジンで処理し、それ以外の処
理はMyISAMやInnoDBなど既存のストレージエンジンを利用します。
SQLを処理するSQL Handlerと既存のストレージエンジンの間に位置
するため、すべてのデータが一度groongaストレージエンジンを通
ることになります。これを利用して、全文検索用のインデックス作
成などを透過的に行います。

.. figure:: _static/images/wrapper-mode.png
   :alt: ラッパーモード


